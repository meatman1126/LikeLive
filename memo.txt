ブログに対するコメントについて要件と実装方針のまとめ
要件
ブログ記事に対してユーザはコメントをすることができる。
またコメントに対する返信としてコメントを追加することができる。

実装方針
コメント機能の実現のために2種類のエンティティを使用する。
1.Commentエンティティ
コメント内容、コメントしたユーザなどのコメントに関する情報を保持する
2.CommentTreeエンティティ
コメントのツリー情報を保持する
必要なフィールドは祖先コメントID,返信コメントID,path_length(親コメントへの返信順の連番)


jpaリポジトリを継承したリポジトリクラスで任意のDTOクラスに結果をマッピングすることはできそう。
Queryアノテーションの中身の書き方に少しだけ注意する必要はあるが。

***************************************************************************************
通知対象のアクションについて
・他ユーザからのフォロー
→フォロー追加アクションにて生成必要
・他ユーザからのコメント
→コメント追加アクションについて生成必要
・他ユーザのブログ登録
→ブログ追加アクションについて生成必要

*****************************************************************************************
DBからデータを取得する際にパフォーマンスを考慮して関連エンティティは遅延ロードさせる方針であるが
場合によっては即時ロードし使用する必要があるその場合リポジトリメソッドに下記のアノテーションを付与する
@EntityGraph(attributePaths = {"author"})
これはblogエンティティのauthor（投稿者）としてuserエンティティが紐付けられている例
なおattributePathsには複数の関連エンティティをカンマ区切りで指定可能
