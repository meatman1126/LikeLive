
2024/9/6
ローカルマシンにてElasticsearchを稼働させようと試みたがマシンスペックの問題で動かすことができなかった。
今後AWS環境にて展開する際にElasticsearchを導入するつもりである。
そのためブログ記事の検索機能についてはそれまで検証ができない。
導入のタイミングで関連コードを復活させる。
・application.propertiesの接続情報
・検索用のリポジトリ
・上記リポジトリを扱うサービス
・エンティティクラスの@docment



elasticsearchでindexを生成するためのリクエスト
対象の環境に向けて送る（下記はローカル機）

curl -X PUT "localhost:9200/blogs" -H 'Content-Type: application/json' -d'
{
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "analyzer": "standard"
      },
      "content": {
        "type": "text",
        "analyzer": "standard"
      },
      "tags": {
        "type": "text",
        "analyzer": "keyword"
      }
    }
  }
}'

上記で一度定義した後であっても内容変更は可能、下記のリクエストを送る
PUT /blogs/_mapping
{
  "properties": {
    "title": {
      "type": "text",
      "analyzer": "standard"
    },
    "content": {
      "type": "text",
      "analyzer": "standard"
    },
    "tags": {
      "type": "text",
      "analyzer": "keyword"
    }
  }
}

//package com.example.bookstore.repository.elastic;
//
//import com.example.bookstore.entity.Blog;
//import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;
//
//import java.util.List;
//
//public interface BlogSearchRepository extends ElasticsearchRepository<Blog, Long> {
//    List<Blog> findByTitleContainingOrContentContainingOrTagsContaining(String keyword);
//
//}
